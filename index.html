<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>추세추종</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="bg-orb orb-1"></div>
  <div class="bg-orb orb-2"></div>

  <main class="app">
    <aside class="sidebar card-glass">
      <h1>추세추종</h1>
      <p class="muted">대시보드 · 계산기 · 저널 · 포지션 · 설정</p>
      <nav class="menu" aria-label="메뉴">
        <button class="menu-btn active" data-view="dashboard">📊 대시보드</button>
        <button class="menu-btn" data-view="calculator">🧮 계산기</button>
        <button class="menu-btn" data-view="journal">📒 저널</button>
        <button class="menu-btn" data-view="positions">💼 포지션</button>
        <button class="menu-btn" data-view="settings">⚙️ 설정</button>
      </nav>
    </aside>

    <section class="content">
      <section id="dashboard" class="view active card-glass">
        <div class="section-head">
          <h2>트레이딩 대시보드</h2>
          <span class="badge" id="dashModeBadge">DAY 모드</span>
        </div>
        <p class="muted">성과와 리스크 정책을 빠르게 확인하세요.</p>

        <div class="stats-grid">
          <article><h3>총 거래</h3><p id="dTotal">0</p></article>
          <article><h3>승률</h3><p id="dWin">0%</p></article>
          <article><h3>누적 손익</h3><p id="dPnl">0원</p></article>
          <article><h3>평균 손익</h3><p id="dAvg">0원</p></article>
        </div>

        <div class="inline-cards">
          <article class="card-mini">
            <h3>시장 신호등 TOR</h3>
            <p>🟢 <span id="torGreenView">1.2</span> · 🟡 <span id="torYellowView">1.0</span> · 🔴 <span id="torRedView">0.7</span></p>
          </article>
          <article class="card-mini">
            <h3>기본 리스크</h3>
            <p>DAY <span id="dayRiskView">1.0%</span> / WEEK <span id="weekRiskView">2.5%</span></p>
          </article>
        </div>
      </section>

      <section id="calculator" class="view card-glass">
        <div class="section-head">
          <h2>포지션 사이징 계산기</h2>
          <span class="badge" id="appliedRiskBadge">적용 리스크 1.00%</span>
        </div>

        <form id="calc-form" class="grid-form">
          <label>티커
            <input type="text" id="calcSymbol" placeholder="BTCUSDT" required />
          </label>
          <label>방향
            <select id="calcSide">
              <option value="Long">Long</option>
              <option value="Short">Short</option>
            </select>
          </label>
          <label>모드
            <select id="mode">
              <option value="DAY">DAY</option>
              <option value="WEEK">WEEK</option>
            </select>
          </label>
          <label>시장 신호등
            <select id="signal">
              <option value="green">🟢 Green</option>
              <option value="yellow">🟡 Yellow</option>
              <option value="red">🔴 Red</option>
            </select>
          </label>
          <label>계좌 자본(원)
            <input type="number" id="capital" min="0" step="1000" placeholder="10000000" required />
          </label>
          <label>리스크(%)
            <input type="number" id="riskPercent" min="0" step="0.1" value="1" required />
          </label>
          <label>진입가
            <input type="number" id="entry" min="0" step="0.01" placeholder="50000" required />
          </label>
          <label>손절가
            <input type="number" id="stop" min="0" step="0.01" placeholder="48500" required />
          </label>
          <label>목표 R배수
            <input type="number" id="targetR" min="1" max="10" step="0.1" value="2" required />
          </label>
          <button class="btn-primary" type="submit">계산하기</button>
          <button id="open-range" class="btn-ghost" type="button">R 1~10 목표가 보기</button>
          <button id="add-position" class="btn-primary" type="button">현재 계산값으로 포지션 추가</button>
        </form>

        <div id="calc-result" class="result">계산 결과가 여기에 표시됩니다.</div>
      </section>

      <section id="journal" class="view card-glass">
        <div class="section-head">
          <h2>매매 저널</h2>
          <button id="clear-all" class="btn-ghost" type="button">전체 삭제</button>
        </div>

        <form id="journal-form" class="grid-form">
          <label>날짜<input type="date" id="jDate" required /></label>
          <label>종목/티커<input type="text" id="jSymbol" placeholder="BTCUSDT" required /></label>
          <label>방향
            <select id="jSide"><option value="Long">Long</option><option value="Short">Short</option></select>
          </label>
          <label>진입가<input type="number" id="jEntry" min="0" step="0.01" required /></label>
          <label>청산가<input type="number" id="jExit" min="0" step="0.01" required /></label>
          <label>수량<input type="number" id="jQty" min="0" step="0.0001" required /></label>
          <label>수수료(원)<input type="number" id="jFee" min="0" step="1" value="0" /></label>
          <label>전략 태그<input type="text" id="jTag" placeholder="돌파, 눌림, 역추세" /></label>
          <label class="full">복기 메모<textarea id="jNote" rows="3" placeholder="진입 근거, 심리 상태, 개선점"></textarea></label>
          <button class="btn-primary" type="submit">저널 저장</button>
        </form>

        <div class="table-wrap">
          <table>
            <thead><tr><th>날짜</th><th>티커</th><th>방향</th><th>손익</th><th>태그</th><th>메모</th><th></th></tr></thead>
            <tbody id="journal-body"></tbody>
          </table>
        </div>
      </section>

      <section id="positions" class="view card-glass">
        <div class="section-head">
          <h2>내 포지션 관리</h2>
          <button id="clear-positions" class="btn-ghost" type="button">포지션 전체 삭제</button>
        </div>
        <p class="muted">계산기에서 추가한 포지션을 추적하고 관리하세요.</p>
        <div class="table-wrap">
          <table>
            <thead><tr><th>시간</th><th>티커</th><th>방향</th><th>수량</th><th>진입/손절</th><th>리스크금액</th><th></th></tr></thead>
            <tbody id="positions-body"></tbody>
          </table>
        </div>
      </section>

      <section id="settings" class="view card-glass">
        <h2>설정</h2>
        <p class="muted">기본 리스크와 TOR, 강조색 등을 변경할 수 있습니다.</p>

        <form id="settings-form" class="grid-form">
          <label>DAY 기본 리스크(%)
            <input type="number" id="setDayRisk" min="0" step="0.1" value="1" />
          </label>
          <label>WEEK 기본 리스크(%)
            <input type="number" id="setWeekRisk" min="0" step="0.1" value="2.5" />
          </label>
          <label>TOR Green
            <input type="number" id="setTorGreen" min="0" step="0.1" value="1.2" />
          </label>
          <label>TOR Yellow
            <input type="number" id="setTorYellow" min="0" step="0.1" value="1.0" />
          </label>
          <label>TOR Red
            <input type="number" id="setTorRed" min="0" step="0.1" value="0.7" />
          </label>
          <label>강조색
            <input type="color" id="setAccent" value="#7c8bff" />
          </label>
          <button class="btn-primary" type="submit">설정 저장</button>
          <button id="reset-settings" class="btn-ghost" type="button">기본값 복원</button>
        </form>
        <p id="settings-status" class="muted"></p>
      </section>
    </section>
  </main>

  <dialog id="range-dialog" class="range-dialog">
    <div class="section-head">
      <h3>목표가 범위 (R 1~10)</h3>
      <button id="close-range" class="btn-ghost" type="button">닫기</button>
    </div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>R 배수</th><th>목표가</th><th>기대수익(원)</th></tr></thead>
        <tbody id="range-body"></tbody>
      </table>
    </div>
  </dialog>

  <script src="script.js"></script>
</body>
</html>
